{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _this = this,\n    _jsxFileName = \"D:\\\\prisma-examples\\\\javascript\\\\rest-nextjs\\\\pages\\\\p\\\\[id].jsx\";\n\nimport _JSXStyle from \"styled-jsx/style\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport ReactMarkdown from 'react-markdown';\nimport Layout from '../../components/Layout';\nimport fetch from 'isomorphic-unfetch';\nimport Router from 'next/router';\n\nfunction publish(_x) {\n  return _publish.apply(this, arguments);\n}\n\nfunction _publish() {\n  _publish = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(id) {\n    var res, data;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return fetch(\"http://localhost:3000/api/publish/\".concat(id), {\n              method: 'PUT'\n            });\n\n          case 2:\n            res = _context.sent;\n            _context.next = 5;\n            return res.json();\n\n          case 5:\n            data = _context.sent;\n            _context.next = 8;\n            return Router.push('/');\n\n          case 8:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _publish.apply(this, arguments);\n}\n\nfunction destroy(_x2) {\n  return _destroy.apply(this, arguments);\n}\n\nfunction _destroy() {\n  _destroy = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(id) {\n    var res, data;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return fetch(\"http://localhost:3000/api/post/\".concat(id), {\n              method: 'DELETE'\n            });\n\n          case 2:\n            res = _context2.sent;\n            _context2.next = 5;\n            return res.json();\n\n          case 5:\n            data = _context2.sent;\n            Router.push('/');\n\n          case 7:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n  return _destroy.apply(this, arguments);\n}\n\nvar Cameras = function Cameras(props) {\n  var cameraname = props.cameraname;\n\n  if (!props.published) {\n    cameraname = \"\".concat(cameraname, \" (Draft)\");\n  }\n\n  var authorName = props.author ? props.author.name : 'Unknown author';\n  return __jsx(Layout, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 29,\n      columnNumber: 5\n    }\n  }, __jsx(\"div\", {\n    className: \"jsx-3440979688\" + \" \" + \"page\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 30,\n      columnNumber: 7\n    }\n  }, __jsx(\"h2\", {\n    className: \"jsx-3440979688\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 31,\n      columnNumber: 9\n    }\n  }, cameraname), __jsx(\"small\", {\n    className: \"jsx-3440979688\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 32,\n      columnNumber: 9\n    }\n  }, \"By \", authorName), __jsx(ReactMarkdown, {\n    source: props.serialnumber,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 33,\n      columnNumber: 9\n    }\n  }), __jsx(\"div\", {\n    className: \"jsx-3440979688\" + \" \" + \"actions\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 9\n    }\n  }, !props.published && __jsx(\"button\", {\n    onClick: function onClick() {\n      return publish(props.id);\n    },\n    className: \"jsx-3440979688\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 13\n    }\n  }, \"Publish\"), __jsx(\"button\", {\n    onClick: function onClick() {\n      return destroy(props.id);\n    },\n    className: \"jsx-3440979688\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 11\n    }\n  }, \"Delete\"))), __jsx(_JSXStyle, {\n    id: \"3440979688\",\n    __self: _this\n  }, \".page.jsx-3440979688{background:white;padding:2rem;}.actions.jsx-3440979688{margin-top:2rem;}button.jsx-3440979688{background:#ececec;border:0;border-radius:0.125rem;padding:1rem 2rem;}button.jsx-3440979688+button.jsx-3440979688{margin-left:1rem;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6XFxwcmlzbWEtZXhhbXBsZXNcXGphdmFzY3JpcHRcXHJlc3QtbmV4dGpzXFxwYWdlc1xccFxcW2lkXS5qc3giXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBd0NrQixBQUc0QixBQUtELEFBSUcsQUFPRixnQkFWbkIsQ0FMZSxBQWdCZixFQVBXLFNBQ2MsRUFUekIscUJBVW9CLGtCQUNwQiIsImZpbGUiOiJEOlxccHJpc21hLWV4YW1wbGVzXFxqYXZhc2NyaXB0XFxyZXN0LW5leHRqc1xccGFnZXNcXHBcXFtpZF0uanN4Iiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0TWFya2Rvd24gZnJvbSAncmVhY3QtbWFya2Rvd24nXHJcbmltcG9ydCBMYXlvdXQgZnJvbSAnLi4vLi4vY29tcG9uZW50cy9MYXlvdXQnXHJcbmltcG9ydCBmZXRjaCBmcm9tICdpc29tb3JwaGljLXVuZmV0Y2gnXHJcbmltcG9ydCBSb3V0ZXIgZnJvbSAnbmV4dC9yb3V0ZXInXHJcblxyXG5hc3luYyBmdW5jdGlvbiBwdWJsaXNoKGlkKSB7XHJcbiAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goYGh0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvcHVibGlzaC8ke2lkfWAsIHtcclxuICAgIG1ldGhvZDogJ1BVVCcsXHJcbiAgfSlcclxuICBjb25zdCBkYXRhID0gYXdhaXQgcmVzLmpzb24oKVxyXG4gIGF3YWl0IFJvdXRlci5wdXNoKCcvJylcclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gZGVzdHJveShpZCkge1xyXG4gIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKGBodHRwOi8vbG9jYWxob3N0OjMwMDAvYXBpL3Bvc3QvJHtpZH1gLCB7XHJcbiAgICBtZXRob2Q6ICdERUxFVEUnLFxyXG4gIH0pXHJcbiAgY29uc3QgZGF0YSA9IGF3YWl0IHJlcy5qc29uKClcclxuICBSb3V0ZXIucHVzaCgnLycpXHJcbn1cclxuXHJcbmNvbnN0IENhbWVyYXMgPSBwcm9wcyA9PiB7XHJcbiAgbGV0IGNhbWVyYW5hbWUgPSBwcm9wcy5jYW1lcmFuYW1lXHJcbiAgaWYgKCFwcm9wcy5wdWJsaXNoZWQpIHtcclxuICAgIGNhbWVyYW5hbWUgPSBgJHtjYW1lcmFuYW1lfSAoRHJhZnQpYFxyXG4gIH1cclxuICBjb25zdCBhdXRob3JOYW1lID0gcHJvcHMuYXV0aG9yID8gcHJvcHMuYXV0aG9yLm5hbWUgOiAnVW5rbm93biBhdXRob3InXHJcbiAgcmV0dXJuIChcclxuICAgIDxMYXlvdXQ+XHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwicGFnZVwiPlxyXG4gICAgICAgIDxoMj57Y2FtZXJhbmFtZX08L2gyPlxyXG4gICAgICAgIDxzbWFsbD5CeSB7YXV0aG9yTmFtZX08L3NtYWxsPlxyXG4gICAgICAgIDxSZWFjdE1hcmtkb3duIHNvdXJjZT17cHJvcHMuc2VyaWFsbnVtYmVyfSAvPlxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYWN0aW9uc1wiPlxyXG4gICAgICAgICAgeyFwcm9wcy5wdWJsaXNoZWQgJiYgKFxyXG4gICAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9eygpID0+IHB1Ymxpc2gocHJvcHMuaWQpfT5QdWJsaXNoPC9idXR0b24+XHJcbiAgICAgICAgICApfVxyXG4gICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXsoKSA9PiBkZXN0cm95KHByb3BzLmlkKX0+RGVsZXRlPC9idXR0b24+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgICA8c3R5bGUganN4PntgXHJcbiAgICAgICAgLnBhZ2Uge1xyXG4gICAgICAgICAgYmFja2dyb3VuZDogd2hpdGU7XHJcbiAgICAgICAgICBwYWRkaW5nOiAycmVtO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLmFjdGlvbnMge1xyXG4gICAgICAgICAgbWFyZ2luLXRvcDogMnJlbTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGJ1dHRvbiB7XHJcbiAgICAgICAgICBiYWNrZ3JvdW5kOiAjZWNlY2VjO1xyXG4gICAgICAgICAgYm9yZGVyOiAwO1xyXG4gICAgICAgICAgYm9yZGVyLXJhZGl1czogMC4xMjVyZW07XHJcbiAgICAgICAgICBwYWRkaW5nOiAxcmVtIDJyZW07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBidXR0b24gKyBidXR0b24ge1xyXG4gICAgICAgICAgbWFyZ2luLWxlZnQ6IDFyZW07XHJcbiAgICAgICAgfVxyXG4gICAgICBgfTwvc3R5bGU+XHJcbiAgICA8L0xheW91dD5cclxuICApXHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBnZXRTZXJ2ZXJTaWRlUHJvcHMgPSBhc3luYyAoY29udGV4dCkgPT4ge1xyXG4gIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKGBodHRwOi8vbG9jYWxob3N0OjMwMDAvYXBpL3Bvc3QvJHtjb250ZXh0LnBhcmFtcy5pZH1gKVxyXG4gIGNvbnN0IGRhdGEgPSBhd2FpdCByZXMuanNvbigpXHJcbiAgcmV0dXJuIHtwcm9wczogey4uLmRhdGF9fVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBQb3N0XHJcbiJdfQ== */\\n/*@ sourceURL=D:\\\\\\\\prisma-examples\\\\\\\\javascript\\\\\\\\rest-nextjs\\\\\\\\pages\\\\\\\\p\\\\\\\\[id].jsx */\"));\n};\n\n_c = Cameras;\nexport var __N_SSP = true;\nexport default Post;\n\nvar _c;\n\n$RefreshReg$(_c, \"Cameras\");","map":{"version":3,"sources":["D:/prisma-examples/javascript/rest-nextjs/pages/p/[id].jsx"],"names":["ReactMarkdown","Layout","fetch","Router","publish","id","method","res","json","data","push","destroy","Cameras","props","cameraname","published","authorName","author","name","serialnumber","Post"],"mappings":";;;;;;;;;AAAA,OAAOA,aAAP,MAA0B,gBAA1B;AACA,OAAOC,MAAP,MAAmB,yBAAnB;AACA,OAAOC,KAAP,MAAkB,oBAAlB;AACA,OAAOC,MAAP,MAAmB,aAAnB;;SAEeC,O;;;;;sEAAf,iBAAuBC,EAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBACoBH,KAAK,6CAAsCG,EAAtC,GAA4C;AACjEC,cAAAA,MAAM,EAAE;AADyD,aAA5C,CADzB;;AAAA;AACQC,YAAAA,GADR;AAAA;AAAA,mBAIqBA,GAAG,CAACC,IAAJ,EAJrB;;AAAA;AAIQC,YAAAA,IAJR;AAAA;AAAA,mBAKQN,MAAM,CAACO,IAAP,CAAY,GAAZ,CALR;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G;;;;SAQeC,O;;;;;sEAAf,kBAAuBN,EAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBACoBH,KAAK,0CAAmCG,EAAnC,GAAyC;AAC9DC,cAAAA,MAAM,EAAE;AADsD,aAAzC,CADzB;;AAAA;AACQC,YAAAA,GADR;AAAA;AAAA,mBAIqBA,GAAG,CAACC,IAAJ,EAJrB;;AAAA;AAIQC,YAAAA,IAJR;AAKEN,YAAAA,MAAM,CAACO,IAAP,CAAY,GAAZ;;AALF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G;;;;AAQA,IAAME,OAAO,GAAG,SAAVA,OAAU,CAAAC,KAAK,EAAI;AACvB,MAAIC,UAAU,GAAGD,KAAK,CAACC,UAAvB;;AACA,MAAI,CAACD,KAAK,CAACE,SAAX,EAAsB;AACpBD,IAAAA,UAAU,aAAMA,UAAN,aAAV;AACD;;AACD,MAAME,UAAU,GAAGH,KAAK,CAACI,MAAN,GAAeJ,KAAK,CAACI,MAAN,CAAaC,IAA5B,GAAmC,gBAAtD;AACA,SACE,MAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAA,wCAAe,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAKJ,UAAL,CADF,EAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAAWE,UAAX,CAFF,EAGE,MAAC,aAAD;AAAe,IAAA,MAAM,EAAEH,KAAK,CAACM,YAA7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAHF,EAIE;AAAA,wCAAe,SAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACG,CAACN,KAAK,CAACE,SAAP,IACC;AAAQ,IAAA,OAAO,EAAE;AAAA,aAAMX,OAAO,CAACS,KAAK,CAACR,EAAP,CAAb;AAAA,KAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAFJ,EAIE;AAAQ,IAAA,OAAO,EAAE;AAAA,aAAMM,OAAO,CAACE,KAAK,CAACR,EAAP,CAAb;AAAA,KAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAJF,CAJF,CADF;AAAA;AAAA;AAAA,g5GADF;AAoCD,CA1CD;;KAAMO,O;;AAkDN,eAAeQ,IAAf","sourcesContent":["import ReactMarkdown from 'react-markdown'\r\nimport Layout from '../../components/Layout'\r\nimport fetch from 'isomorphic-unfetch'\r\nimport Router from 'next/router'\r\n\r\nasync function publish(id) {\r\n  const res = await fetch(`http://localhost:3000/api/publish/${id}`, {\r\n    method: 'PUT',\r\n  })\r\n  const data = await res.json()\r\n  await Router.push('/')\r\n}\r\n\r\nasync function destroy(id) {\r\n  const res = await fetch(`http://localhost:3000/api/post/${id}`, {\r\n    method: 'DELETE',\r\n  })\r\n  const data = await res.json()\r\n  Router.push('/')\r\n}\r\n\r\nconst Cameras = props => {\r\n  let cameraname = props.cameraname\r\n  if (!props.published) {\r\n    cameraname = `${cameraname} (Draft)`\r\n  }\r\n  const authorName = props.author ? props.author.name : 'Unknown author'\r\n  return (\r\n    <Layout>\r\n      <div className=\"page\">\r\n        <h2>{cameraname}</h2>\r\n        <small>By {authorName}</small>\r\n        <ReactMarkdown source={props.serialnumber} />\r\n        <div className=\"actions\">\r\n          {!props.published && (\r\n            <button onClick={() => publish(props.id)}>Publish</button>\r\n          )}\r\n          <button onClick={() => destroy(props.id)}>Delete</button>\r\n        </div>\r\n      </div>\r\n      <style jsx>{`\r\n        .page {\r\n          background: white;\r\n          padding: 2rem;\r\n        }\r\n\r\n        .actions {\r\n          margin-top: 2rem;\r\n        }\r\n\r\n        button {\r\n          background: #ececec;\r\n          border: 0;\r\n          border-radius: 0.125rem;\r\n          padding: 1rem 2rem;\r\n        }\r\n\r\n        button + button {\r\n          margin-left: 1rem;\r\n        }\r\n      `}</style>\r\n    </Layout>\r\n  )\r\n}\r\n\r\nexport const getServerSideProps = async (context) => {\r\n  const res = await fetch(`http://localhost:3000/api/post/${context.params.id}`)\r\n  const data = await res.json()\r\n  return {props: {...data}}\r\n}\r\n\r\nexport default Post\r\n"]},"metadata":{},"sourceType":"module"}